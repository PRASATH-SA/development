<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Login | Favoflex E-Commerce</title>

  <!-- Bootstrap + Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

  <link rel="stylesheet" href="style.css">
</head>
<body class="premium-bg">

  <!-- Header -->
   <header class="py-3 border-bottom bg-white">
    <div class="container d-flex align-items-center justify-content-between">
      <div class="d-flex align-items-center gap-3">
        <img src="FAVOFLEX.svg" alt="logo" style="height:70px">
        <h3 id="logoName" class="mb-0 brand-text" style="font-family: 'Poppins', sans-serif;font-weight: 700;">
            <span style="color: #FFA500;">FAVO</span><span style="color: #367588;">FLEX</span>
        </h3>
      </div>
      <div class="scroll-wrapper">
        <div class="scroll-text-container">
            <span>Reinforce with your design</span>
            <span>Become an artist</span>
            <span>On 28.12.2025</span>
            <span>Celebrating 1st year</span>
        </div>
      </div>
    </div>
  </header>

  <!-- Split layout -->
  <main class="container my-5">
    <div class="row shadow-sm rounded overflow-hidden">
      <!-- Left - Banner -->
      <div class="col-lg-6 d-none d-lg-block banner-panel">
        <!-- use any premium e-commerce image -->
        <img src="FAVOFLEX.svg" width="600px" alt="logo">
        <div class="banner-overlay">
          <h2>Shop the Best</h2>
          <p>Fast delivery • Secure payments • Premium products</p>
        </div>
       
      </div>

      <!-- Right - Auth Card -->
      <div class="col-lg-6 bg-white p-5">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <div>
            <h3 class="fw-bold mb-0">Welcome back</h3>
            <div class="text-muted small">Sign in to continue</div>
          </div>
          
        </div>

        <!-- Alerts -->
        <div id="alertPlaceholder"></div>

        <!-- Form -->
        <form id="loginForm" novalidate>
          <div class="mb-3">
            <label class="form-label">Email</label>
            <input id="loginEmail" type="email" class="form-control premium-input" required>
            <div class="invalid-feedback">Enter a valid email.</div>
          </div>

          <div class="mb-3 position-relative">
            <label class="form-label">Password</label>
            <input id="loginPassword" type="password" class="form-control premium-input" required>
            <button type="button" class="btn btn-sm toggle-pass" id="toggleLoginPass"><i class="bi bi-eye"></i></button>
            <div class="invalid-feedback">Password required.</div>
          </div>

          <div class="d-flex justify-content-between align-items-center mb-3">
            <div>
              <input id="remember" type="checkbox"> <label for="remember" class="small">Remember me</label>
            </div>
            <a href="#" id="forgot-link" class="small">Forgot password?</a>
          </div>

          <button id="loginBtn" onclick="showAlert('Working on it','primary')" type="button" class="btn btn-primary w-100 premium-btn">
            <span id="loginBtnText">Login</span>
            <span id="loginBtnSpinner" class="spinner-border spinner-border-sm ms-2 d-none" role="status" aria-hidden="true"></span>
          </button>

          <div class="text-center my-3">or</div>

          <button id="googleLogin" onclick="showAlert('Working on it','primary')" type="button" class="btn btn-outline-secondary w-100 mb-2">
            <i class="bi bi-google me-2"></i> Sign in with Google
          </button>
          <div class="small text-center text-muted">New? <a href="register.html">Create account</a></div>
        </form>

        <!-- Footer small note -->
        <div class="text-center text-muted small mt-4">By continuing, you agree to our <a href="https://www.favoflex.com/termandconditions.html">Terms & Privacy.</a></div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="bg-white border-top py-4">
    <div class="container d-flex flex-column flex-md-row justify-content-between">
      <!-- <div class="mb-2 mb-md-0">
        © <span id="year"></span> Favoflex — All rights reserved.
      </div> -->
      <div>© <span id="y2"></span>2024-2025, Favoflex E-Commerce</div>
      <div>
        <a class="me-3 text-muted" href="https://www.favoflex.com/termandconditions.html">Privacy</a>
        <a class="me-3 text-muted" href="https://www.favoflex.com/termandconditions.html">Terms</a>
        <a class="text-muted" href="#">Help</a>
      </div>
    </div>
  </footer>

  <!-- Forgot Password Modal -->
  <div class="modal fade" id="forgotModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Reset password</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div id="forgotAlert"></div>
          <div class="mb-3">
            <label class="form-label">Enter your email</label>
            <input id="forgotEmail" type="email" class="form-control">
          </div>
        </div>
        <div class="modal-footer">
          <button id="sendReset" type="button" class="btn btn-primary">Send reset email</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Helpers
    // const alertPlacholder = document.getElementById('alertPlaceholder');
    function showAlert(message, type='danger', target=alertPlaceholder) {
      target.innerHTML = `<div class="alert alert-${type} alert-dismissible fade show" role="alert">
        ${message}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
      </div>`;
    }
  </script>

  <!-- Scripts -->
  <script type="module">
    import {
      auth,
      signInWithEmailAndPassword,
      googleProvider,
      signInWithPopup,
      sendPasswordResetEmail
    } from "./firebase.js";

    // Helpers
    const alertPlaceholder = document.getElementById('alertPlaceholder');
    function showAlert(message, type='danger', target=alertPlaceholder) {
      target.innerHTML = `<div class="alert alert-${type} alert-dismissible fade show" role="alert">
        ${message}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
      </div>`;
    }

    // toggle password
    document.getElementById('toggleLoginPass').addEventListener('click', () => {
      const inp = document.getElementById('loginPassword');
      const ico = document.querySelector('#toggleLoginPass i');
      if (inp.type === 'password') { inp.type = 'text'; ico.className = 'bi bi-eye-slash'; }
      else { inp.type = 'password'; ico.className = 'bi bi-eye'; }
    });

    // form validation + login
    const loginForm = document.getElementById('loginForm');
    const loginBtn = document.getElementById('loginBtn');
    loginForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      if (!loginForm.checkValidity()) {
        loginForm.classList.add('was-validated');
        return;
      }
      // spinner
      loginBtn.setAttribute('disabled','');
      document.getElementById('loginBtnSpinner').classList.remove('d-none');

      try {
        await signInWithEmailAndPassword(auth, loginEmail.value, loginPassword.value);
        showAlert('Login successful', 'success');
        // redirect or load dashboard
        setTimeout(()=> location.href='home.html', 800);
      } catch (err) {
        showAlert(err.message, 'danger');
      } finally {
        loginBtn.removeAttribute('disabled');
        document.getElementById('loginBtnSpinner').classList.add('d-none');
      }
    });

    // Google sign-in
    document.getElementById('googleLogin').addEventListener('click', async () => {
      try {
        await signInWithPopup(auth, googleProvider);
        showAlert('Signed in with Google', 'success');
        setTimeout(()=> location.href='home.html', 700);
      } catch (err) {
        showAlert(err.message, 'danger');
      }
    });

    // forgot password modal actions
    const forgotModal = new bootstrap.Modal(document.getElementById('forgotModal'));
    document.getElementById('forgot-link').addEventListener('click', (e) => {
      e.preventDefault();
      document.getElementById('forgotEmail').value = loginEmail.value || '';
      forgotModal.show();
    });

    document.getElementById('sendReset').addEventListener('click', async () => {
      const email = document.getElementById('forgotEmail').value;
      const target = document.getElementById('forgotAlert');
      target.innerHTML = '';
      try {
        await sendPasswordResetEmail(auth, email);
        target.innerHTML = `<div class="alert alert-success">Reset email sent.</div>`;
      } catch (err) {
        target.innerHTML = `<div class="alert alert-danger">${err.message}</div>`;
      }
    });

    // footer year
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
